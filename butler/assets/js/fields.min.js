!(function(c){var b="btrOptions";var a=function(e,d){this.container=c(e);this.init();this.listen()};a.prototype={constructor:a,checkboxLabelToggle:function(d){d.parent().find('input[type="checkbox"]').click()},repeaterAdd:function(d){c.ajax({type:"POST",url:ajaxurl,data:{option:d.parent().data("option"),count:d.parent().find('div[class^="btr-repeater-group-"]').length,action:"butler_admin_fields_repeater"},beforeSend:function(){c('<span class="spinner"></span>').insertAfter(d)},success:function(e){c(e).insertAfter(d).hide().fadeIn();d.next().find('[data-btr-option-type="select"] .btr-field, [data-btr-option-type="multiselect"] .btr-field').select2();d.remove();c('[data-btr-option-type="repeater"] .spinner').remove()}})},repeaterRemove:function(d){d.closest('div[class^="btr-repeater-group-"]').slideUp(500,function(){c(this).remove()})},imageradio:function(d){d.closest("fieldset").find("label").removeClass("selected");d.closest("label").addClass("selected")},slider:function(e){var h=parseInt(e.find("input.btr-slider-hidden").val());var g=parseInt(e.attr("slider_min"));var d=parseInt(e.attr("slider_max"));var f=parseInt(e.attr("slider_interval"));e.find("input.btr-slider-hidden").attr("type","text").hide();e.slider({range:"min",value:h,min:g,max:d,step:f,slide:function(i,j){c(this).parent().find(".btr-slider-value").text(j.value);c(this).find("input.btr-slider-hidden").val(j.value).keyup()}});e.find(".ui-slider-handle").removeAttr("href")},activation:function(d){if(d.is(":checked")){d.parent().removeClass("deactivated").find(".btr-field, .btr-slider-value, .btr-slider-unit").removeAttr("disabled").css("opacity",1);if(d.parents("[data-btr-option-type]").data("btr-option-type")=="slider"){d.parent().find(".btr-field").slider("enable")}}else{d.parent().addClass("deactivated").find(".btr-field, .btr-slider-value, .btr-slider-unit").attr("disabled","disabled").css("opacity",0.5);if(d.parents("[data-btr-option-type]").data("btr-option-type")=="slider"){d.parent().find(".btr-field").slider("disable")}}},readmore:function(d){d.parents(".btr-field-description").find(".btr-extended-content").slideToggle(400,function(){if(c(this).is(":visible")){d.text("Less...")}else{d.text("More...")}})},sortable:function(d){d.sortable({items:'[class^="btr-repeater-group-"]',handle:".btr-toolbar a.dashicons-menu",placeholder:"btr-state-highlight",cursor:"move",start:function(g,f){f.placeholder.height(c('[class^="btr-repeater-group-"]').outerHeight()-6);f.placeholder.width(c('[class^="btr-repeater-group-"]').outerWidth()-6)}});d.disableSelection()},postbox:function(d){c(".if-js-closed").removeClass("if-js-closed").addClass("closed");postboxes.add_postbox_toggles(d.data("options-page"))},init:function(){var d=this;if(c.isFunction(c.fn.select2)){this.container.find('[data-btr-option-type="select"] .btr-field, [data-btr-option-type="multiselect"] .btr-field').select2({placeholder:"Make your selection"})}this.container.find('[data-btr-option-type="slider"] .btr-field').each(function(){d.slider(c(this))});if(this.container.find('[data-btr-option-type="repeater"]').length){this.sortable(this.container.find('[data-btr-option-type="repeater"] > .btr-field-wrap'))}this.container.find('[data-btr-option-type="imageradio"] input:checked:enabled').closest("label").addClass("selected");this.container.find("input.activation").each(function(){d.activation(c(this))});this.container.find("li.customize-control").each(function(){if(!c.trim(c(this).html()).length){c(this).remove()}});if((typeof postboxes!="undefined")&&this.container.attr("data-options-page")){this.postbox(this.container)}},listen:function(){var d=this;this.container.on("click",".checkbox-label",function(f){d.checkboxLabelToggle(c(this))});this.container.on("click","a.btr-repeat",function(f){f.preventDefault();d.repeaterAdd(c(this))});this.container.on("click",".btr-repeater-toolbar a.dashicons-post-trash",function(f){f.preventDefault();d.repeaterRemove(c(this))});this.container.on("click",'[data-btr-option-type="imageradio"] label',function(f){d.imageradio(c(this))});this.container.on("click","input.activation",function(){d.activation(c(this))});this.container.on("click",".btr-read-more",function(f){f.preventDefault();d.readmore(c(this))});this.container.on("click",".btr-toolbar a.dashicons-menu",function(f){f.preventDefault()})}};c.fn[b]=function(d){return this.each(function(){if(!c.data(this,"plugin_"+b)){c.data(this,"plugin_"+b,new a(this,d))}})};c(document).ready(function(d){d("#edittag, #post-body, [data-options-page], #customize-controls").btrOptions()})})(window.jQuery);